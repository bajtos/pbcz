== 
Nastroje pro zpracovani rozpoctu obci do formatu Google Public Data 
==

1. Struktura souboru
====================

Vsechny skripty ocekavaji seznam CSV souboru v adresari data/
   data/vsechna-data-2000.csv
   data/vsechna-data-2001.csv
   (...)
   extract-budget-classes.py
   (...)

** 2. Definice trid (PBCZ_BUDGET_CLASSES)
=========================================

Tridy jsou definovane jako hierarchie (strom), kde kazda polozka ma odkaz na rodice.
Polozky na nejvyssi urovni (tridy: 1,2,3,4,5,6,8) maji jako predka prazdnou hodnotu.

Priklad:
    "budget_class","name_cs","parent"
    "1","DAŇOVÉ PŘÍJMY",""
    "11","Daně z příjmů, zisku a kapitálových výnosů","1"
    "111","Daně z příjmů fyzických osob","11"

CSV lze vygenerovat skriptem extract-budget-classes.py

** 3. Definice obci (PBCZ_MUNICIPALITY)
=======================================

Obce jsou (zatim) definovane jako plochy seznam, identifikatorem je CSU kod.

Priklad:
    "municipality","name_cs"
    "500011","Želechovice nad Dřevnicí"
    "500259","Veřovice"
    "500291","Vřesina"
    "500496","Olomouc"

CSV lze vygenerovat skriptem extract-municipalities.py

** 4. Extrakce dat (financnich castek)
======================================

Data lze ziskat primo z SQL databaze - viz dotazy v dump-class-slice.sh.
    class1 je "Trida kod" (napr. "1")
    class2 je "Skupina kod" (napr. "11")
    class3 je "Podskupina kod" (napr. "111")
    class4 je "Polozka kod" (napr. "1111")

Priklad:

    class,municipality,year,amount
    1,554782,2000,24559090120
    1,554782,2001,25450165990
    1,554782,2002,28216844320
    1,554782,2003,31100467600

Alternativne lze ty same data dostat z CSV souboru
 - nejdriv zavolat preprocess-data.py, ktery z CSV souboru vytvori SQLite3 databazi data/amounts.db
 - pak zavolat dump-class-slice.sh, ktery vytvori "slice" pro tridy


